#!/bin/bash
#
# $Id$
# Author: Florian Haftmann, TU Muenchen
#
# Roundtrip for all Haskell files in the examples directory.

function fail()
{
  echo "$1" >&2
  #exit 2
}

EXECPATH="$(dirname "$0")/.."

[ -z "$EXECPATH" ] && fail "$0 must be called with explicit path"

[ -z "$ISABELLE_HOME" ] && ISABELLE_HOME="$(isatool getenv -b ISABELLE_HOME)"
ISATOOL="$ISABELLE_HOME/bin/isatool"

cd "$EXECPATH"
for SRC in ex/src_hs/*.hs
do
  DST=ex/dst_thy/
  echo "importing $SRC..."
  ./bin/import_file "$SRC" "$DST" > /dev/zero 2> /dev/zero || fail "could not import $SRC"
done