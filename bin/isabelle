#!/bin/bash
#
# Author: Florian Haftmann, TU Muenchen
#
# Wrapper script for isabelle tool.

## environment

HASKABELLE_HOME="$(cd "$(dirname "$0")"; cd "$(pwd -P)"; cd ..; pwd)"

if [ -z "$ISABELLE_TOOL" ]
then
  ISABELLE_INVOKE_HOME="$(cd "$(dirname "$(type -p isabelle)")"; cd ..; cd "$(pwd -P)"; pwd)"
  if [ "$ISABELLE_INVOKE_HOME" == "$HASKABELLE_HOME" ]
  then
    echo "Cannot find isabelle executable on PATH=$PATH" >&2
    exit 2
  fi
  ISABELLE_TOOL="$(isabelle getenv -b ISABELLE_TOOL)"
fi

## execute

"$ISABELLE_TOOL" "$@" || exit $?
