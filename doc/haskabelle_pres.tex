%% LyX 1.5.5 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass[english]{beamer}
\usepackage{mathptmx}
\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\usepackage{amsmath}
\usepackage{color}
\usepackage{graphicx}
\usepackage{amssymb}

\makeatletter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LyX specific LaTeX commands.
\newcommand{\noun}[1]{\textsc{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Textclass specific LaTeX commands.
 % this default might be overridden by plain title style
 \newcommand\makebeamertitle{\frame{\maketitle}}%
 \AtBeginDocument{
   \let\origtableofcontents=\tableofcontents
   \def\tableofcontents{\@ifnextchar[{\origtableofcontents}{\gobbletableofcontents}}
   \def\gobbletableofcontents#1{\origtableofcontents}
 }
 \makeatletter
 \long\def\lyxframe#1{\@lyxframe#1\@lyxframestop}%
 \def\@lyxframe{\@ifnextchar<{\@@lyxframe}{\@@lyxframe<*>}}%
 \def\@@lyxframe<#1>{\@ifnextchar[{\@@@lyxframe<#1>}{\@@@lyxframe<#1>[]}}
 \def\@@@lyxframe<#1>[{\@ifnextchar<{\@@@@@lyxframe<#1>[}{\@@@@lyxframe<#1>[<*>][}}
 \def\@@@@@lyxframe<#1>[#2]{\@ifnextchar[{\@@@@lyxframe<#1>[#2]}{\@@@@lyxframe<#1>[#2][]}}
 \long\def\@@@@lyxframe<#1>[#2][#3]#4\@lyxframestop#5\lyxframeend{%
   \frame<#1>[#2][#3]{\frametitle{#4}#5}}
 \makeatother
 \newenvironment{topcolumns}{\begin{columns}[t]}{\end{columns}}
 \newenvironment{lyxcode}
   {\begin{list}{}{
     \setlength{\rightmargin}{\leftmargin}
     \setlength{\listparindent}{0pt}% needed for AMS classes
     \raggedright
     \setlength{\itemsep}{0pt}
     \setlength{\parsep}{0pt}
     \normalfont\ttfamily}%
    \def\{{\char`\{}
    \def\}{\char`\}}
    \def\textasciitilde{\char`\~}
    \item[]}
   {\end{list}}
 \def\lyxframeend{} % In case there is a superfluous frame end

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
\usetheme{Warsaw}
% or ...

\setbeamercovered{transparent}
% or whatever (possibly just delete it)

\makeatother

\usepackage{babel}

\begin{document}





\title{\noun{Haskabelle}}


\subtitle{Converting Haskell98 to Isar/HOL}


\titlegraphic{\includegraphics[scale=0.45]{isa_hask_logo}}


\author[Tobias-Christian Rittweiler]{Tobias-Christian Rittweiler }


\institute{Technische-Universität München}


\date{2008-10-05}

\makebeamertitle
\pgfdeclareimage[height=0.5cm]{tumlogo}{/home/tcr/tmp/presentation/TUM-Logo-102.eps}

\logo{\pgfuseimage{tumlogo}}



\AtBeginSubsection[]{

  \frame<beamer>{ 

    \frametitle{Outline}   

    \tableofcontents[currentsection,currentsubsection] 

  }

}



%\beamerdefaultoverlayspecification{<+->}


\lyxframeend{}\lyxframe{Outline}

\tableofcontents{}




\lyxframeend{}\section{Introductionary Words}


\lyxframeend{}\subsection[Motivation]{Motivation }


\lyxframeend{}\lyxframe{What's \noun{Haskabelle} about?}

\begin{topcolumns}%{}


\column{5cm}

\begin{block}
<1->{Isar/HOL}
\begin{itemize}
\item FP + logic
\item typed $\lambda$ calculus
\item \texttt{fun},\texttt{ datatype}
\item syntactic sugar: \texttt{case}, etc.
\end{itemize}
\end{block}

\column{5cm}

\begin{exampleblock}
<2->{Haskell}
\begin{itemize}
\item {}``practical'' FP
\item pure, lazy
\item monads
\item gaining momentum
\end{itemize}
\end{exampleblock}
\end{topcolumns}%{}

\lyxframeend{}\lyxframe{What's \noun{Haskabelle} about?}

\begin{center}
\includegraphics[scale=0.8]{motiv1}
\par\end{center}


\lyxframeend{}\lyxframe{What's \noun{Haskabelle} about?}

\begin{center}
\includegraphics[scale=0.8]{motiv2}
\par\end{center}


\lyxframeend{}\lyxframe{What's \noun{Haskabelle} about?}

\begin{center}
\includegraphics[scale=0.8]{motiv3}
\par\end{center}


\lyxframeend{}\subsection{Concept}


\lyxframeend{}\lyxframe{What does \noun{Haskabelle} do?}

\begin{center}
\includegraphics[scale=0.7]{dumb2}
\par\end{center}


\pause{}

\begin{itemize}
\item {}``dumb tool'', works on Abstract Syntax Trees only.
\end{itemize}

\pause{}

\begin{itemize}
\item e.g. no type inference
\end{itemize}

\pause{}

\begin{itemize}
\item we delegate the hard work to Isabelle
\end{itemize}

\pause{}

\begin{itemize}
\item \underbar{\small Conclusion}: Only because the conversion succeeded,
does not mean that Isabelle won't choke...
\end{itemize}

\lyxframeend{}\section{\noun{Haskabelle}}


\lyxframeend{}\subsection{What we can...}


\lyxframeend{}\lyxframe{An Overview {\small (1)}}

\begin{itemize}
\item Hs.ModuleName Resolution
\end{itemize}
~

\begin{itemize}
\item Declarations: %
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{itemize}
\item functions (\texttt{\small fun})
\item constants (\texttt{\small definition})
\item algebraic data types (\texttt{\small datatype})
\item classes \& instances (\texttt{\small class}, \texttt{\small instantiation})
\end{itemize}
%
\end{minipage}
\end{itemize}
~

\begin{itemize}
\item Linearization of declarations
\end{itemize}

\lyxframeend{}\lyxframe{An Overview {\small (2)}}

\begin{itemize}
\item Expressions: %
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{itemize}
\item literals (integers, strings, characters)
\item applications, incl. infix applications and sections
\item lambda abstractions
\item if, let, case
\item pattern guards
\item list comprehensions
\end{itemize}
%
\end{minipage}
\end{itemize}

\lyxframeend{}\subsection{A few examples}


\lyxframeend{}\lyxframe{Toplevel Function Declarations }

\begin{exampleblock}
<1->{\texttt{\small .hs}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
revappend~{[}]~~~~~ys~=~ys

revappend~(x:xs)~ys~=~revappend~xs~(x:ys)~
\end{lyxcode}
%
\end{minipage}
\end{exampleblock}
\begin{block}
<2->{\texttt{\small .thy}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
fun~revappend~

where

~~\char`\"{}revappend~Nil~ys~=~ys\char`\"{}

|~\char`\"{}revappend~(x~\#~xs)~ys~=~revappend~xs~(x~\#~ys)\char`\"{}
\end{lyxcode}
%
\end{minipage}
\end{block}

\lyxframeend{}\lyxframe{Local Function Declarations {\small (1)}}

\begin{exampleblock}
<1->{\texttt{\small .hs}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
square\_list~xs~=~map~square~xs

~~where~square~x~=~x~{*}~x
\end{lyxcode}
%
\end{minipage}
\end{exampleblock}
\begin{block}
<2->{\texttt{\small .thy}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
fun~square0

where

~~\char`\"{}square0~x~=~(x~{*}~x)\char`\"{}

~

fun~square\_list

where

~~\char`\"{}square\_list~xs~=~map~square0~xs\char`\"{}
\end{lyxcode}
%
\end{minipage}
\end{block}

\lyxframeend{}\lyxframe{Local Function Declarations {\small (2)}}

\begin{itemize}
\item Free variables in local function declarations can't be converted..
\end{itemize}
\begin{exampleblock}
<1->{\texttt{\small .hs}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
scale\_list~n~xs~=~map~scale~xs

~~where~scale~x~=~n~{*}~x~~~~-{}-~Error:~closes~over~n.
\end{lyxcode}
%
\end{minipage}
\end{exampleblock}
\begin{itemize}
\item If applicable, use lambda expressions instead..
\end{itemize}
\begin{exampleblock}
<2->{\texttt{\small .hs}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
scale\_list~n~xs~=~map~(\textbackslash{}x~->~n~{*}~x)~xs
\end{lyxcode}
%
\end{minipage}
\end{exampleblock}
\begin{block}
<3->{\texttt{\small .thy}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
fun~scale\_list

where

~~\char`\"{}scale\_list~n~xs~=~map~(\%~x~.~n~{*}~x)~xs\char`\"{}
\end{lyxcode}
%
\end{minipage}
\end{block}

\lyxframeend{}\lyxframe{Algebraic Data Types}

\begin{exampleblock}
<1->{\texttt{\small .hs}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
data~Nat~=~Zero~|~Suc~Nat

~

add\_nat~Zero~~~~y~=~y

add\_nat~(Suc~x)~y~=~Suc~(add\_nat~x~y)~
\end{lyxcode}
%
\end{minipage}
\end{exampleblock}
\begin{block}
<2->{\texttt{\small .thy}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
datatype~Nat~=~Zero

~~~~~~~~~~~~~|~Suc~Nat

~

fun~add\_nat

where

~~\char`\"{}add\_nat~Zero~y~=~y\char`\"{}

|~\char`\"{}add\_nat~(Suc~x)~y~=~Suc~(add\_nat~x~y)\char`\"{}~


\end{lyxcode}
%
\end{minipage}
\end{block}

\lyxframeend{}\lyxframe{Type Classes {\small (1)}}


\framesubtitle{Class declarations}

\begin{exampleblock}
<1->{\texttt{\small .hs}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
class~Monoid~a~where

~~nothing~::~a

~~plus~~~~::~a~->~a~->~a
\end{lyxcode}
%
\end{minipage}
\end{exampleblock}
\begin{block}
<2->{\texttt{\small .thy}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
class~Monoid~=~type~+

~~fixes~nothing~::~'a

~~fixes~plus~::~\char`\"{}'a~=>~'a~=>~'a\char`\"{}
\end{lyxcode}
%
\end{minipage}
\end{block}

\lyxframeend{}\lyxframe{Type Classes {\small (2)}}


\framesubtitle{Instance declarations}

\begin{exampleblock}
<1->{\texttt{\small .hs}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
instance~Monoid~Nat~where

~~nothing~=~Zero

~~plus~~~~=~add\_nat
\end{lyxcode}
%
\end{minipage}
\end{exampleblock}
\begin{block}
<2->{\texttt{\small .thy}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
instantiation~Nat~::~Monoid

begin

~~definition~nothing\_Nat~::~\char`\"{}Nat\char`\"{}~where

~~~~\char`\"{}nothing\_Nat~=~Zero\char`\"{}

~~definition~plus\_Nat~::~\char`\"{}Nat~=>~Nat~=>~Nat\char`\"{}~where~

~~~~\char`\"{}plus\_Nat~=~add\_nat\char`\"{}

instance~..
\end{lyxcode}
%
\end{minipage}
\end{block}

\lyxframeend{}\lyxframe{Type Classes {\small (3)}}


\framesubtitle{Class context annotations}

\begin{exampleblock}
<1->{\texttt{\small .hs}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
summ~::~(Monoid~a)~=>~{[}a]~->~a

summ~{[}]~~~~~=~nothing

summ~(x:xs)~=~plus~x~(summ~xs)
\end{lyxcode}
%
\end{minipage}
\end{exampleblock}
\begin{block}
<2->{\texttt{\small .thy}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
fun~summ~::~\char`\"{}('a~::~Monoid)~list~=>~('a~::~Monoid)\char`\"{}

where

~~\char`\"{}summ~Nil~=~nothing\char`\"{}

|~\char`\"{}summ~(x~\#~xs)~=~plus~x~(summ~xs)\char`\"{}~
\end{lyxcode}
%
\end{minipage}
\end{block}

\lyxframeend{}\subsection{What we can't...(yet)}


\lyxframeend{}\lyxframe{Work In Progress}

\begin{itemize}
\item Infix Declarations 
\end{itemize}
~

\begin{itemize}
\item Records
\end{itemize}
~

\begin{itemize}
\item Monads, and \texttt{{}``do''}
\end{itemize}
~

\begin{itemize}
\item Mapping between Haskell identifiers and their Isabelle pendants
\end{itemize}
~

\begin{itemize}
\item Documentation
\end{itemize}

\lyxframeend{}\subsection{Architecture}


\lyxframeend{}\lyxframe{Overview over the Implementation}

5 Phases:

\begin{itemize}
\item Parsing
\end{itemize}

\pause{}

\begin{itemize}
\item Preprocessing
\end{itemize}

\pause{}

\begin{itemize}
\item Converting
\end{itemize}

\pause{}

\begin{itemize}
\item Adapting
\end{itemize}

\pause{}

\begin{itemize}
\item Printing
\end{itemize}

\lyxframeend{}\subsection{Customizability}


\lyxframeend{}\lyxframe{Adapting Haskell to Isabelle}

\begin{center}
\includegraphics[scale=0.8]{icebergs1}
\par\end{center}


\lyxframeend{}\lyxframe{Adapting Haskell to Isabelle}

\begin{center}
\includegraphics[scale=0.8]{icebergs2}
\par\end{center}


\lyxframeend{}\lyxframe{Adapting Haskell to Isabelle}

\begin{center}
\includegraphics[scale=0.8]{icebergs3}
\par\end{center}


\lyxframeend{}\lyxframe{Adapting Haskell to Isabelle}

\begin{center}
\includegraphics[scale=0.8]{icebergs4}
\par\end{center}


\lyxframeend{}\section{Final Words}


\lyxframeend{}\subsection{Final Example}


\lyxframeend{}\lyxframe{\texttt{lookup}}

\begin{exampleblock}
<1->{\texttt{\small .hs}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
{\small lookup~::~(Eq~a)~=>~a~->~{[}(a,b)]~->~Maybe~b}{\small \par}

{\small lookup~key~{[}]~~~~=~~Nothing}{\small \par}

{\small lookup~key~((x,y):xys)}{\small \par}

{\small{}~~~~|~key~==~x~~~=~~Just~y}{\small \par}

{\small{}~~~~|~otherwise~~=~~lookup~key~xys}
\end{lyxcode}
%
\end{minipage}
\end{exampleblock}

\pause{}

\begin{block}
<2->{\texttt{\small .thy}}

%
\begin{minipage}[t][1\totalheight]{1\columnwidth}%
\begin{lyxcode}
{\small fun~lookup~::~\char`\"{}('a~::~heq)~=>~('a~{*}~'b)~list~}{\small \par}

{\small{}~~~~~~~~~~~~~~~=>~'b~option\char`\"{}~}{\small \par}

{\small where}{\small \par}

{\small{}~~\char`\"{}lookup~key~Nil~=~None\char`\"{}}{\small \par}

{\small |~\char`\"{}lookup~key~((x,~y)~\#~xys)~}{\small \par}

{\small{}~~~~~=~(if~heq~key~x~then~Some~y~}{\small \par}

{\small{}~~~~~~~~else~lookup~key~xys)\char`\"{}}
\end{lyxcode}
%
\end{minipage}
\end{block}

\lyxframeend{}\subsection{Personal Experience}


\lyxframeend{}\lyxframe{Haskell is cool...}

\begin{itemize}
\item ...but debugging can be a \textcolor{red}{real PITA.}
\end{itemize}

\lyxframeend{}

\appendix

\lyxframeend{}
\end{document}
