
## targets

default: Thy ../Makefile.in
images: 
test: Thy

all: images test

.PHONY: Thy clean images test default


## global settings

SRC = $(ISABELLE_HOME)/src
OUT = $(ISABELLE_OUTPUT)
LOG = $(OUT)/log

USEDIR = $(ISABELLE_TOOL) usedir -v true -i false -d false -C false -D document

ifeq ($(ISABELLE_DOC_SRC),)
ISABELLE_DOC_SRC=$(ISABELLE_HOME)/doc-src
endif


## Thy

THY = $(LOG)/HOL-Thy.gz

Thy: $(THY)

$(THY): Thy/ROOT.ML Thy/Setup.thy Thy/Haskabelle.thy
	@$(USEDIR) HOL Thy


## mimic isabelle document sources

../Makefile.in: $(ISABELLE_DOC_SRC)/Makefile.in
	( cd .. && for NAME in $(ISABELLE_DOC_SRC)/*; do ln -s $$NAME $$(basename $$NAME); done )
	ln -s $(ISABELLE_HOME)/lib/texinputs ../../lib


## clean

clean:
	@( cd .. && for NAME in *; do if [ -L $$NAME ]; then rm -v $$NAME; fi; done )
	@ rm -fv ../../lib/texinputs
	@rm -f $(THY)
