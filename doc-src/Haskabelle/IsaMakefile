
## targets

default: Thy ../Makefile.in
images: 
test: Thy

all: images test


## global settings

SRC = $(ISABELLE_HOME)/src
OUT = $(ISABELLE_OUTPUT)
LOG = $(OUT)/log
ISABELLE_TOOL = $(ISATOOL) # probably legacy

USEDIR = $(ISABELLE_TOOL) usedir -v true -i false -d false -C false -D document

ifeq ($(ISABELLE_DOC_SRC),)
ISABELLE_DOC_SRC=$(ISABELLE_HOME)/doc-src
endif


## Thy

THY = $(LOG)/HOL-Thy.gz

Thy: $(THY)

$(THY): Thy/ROOT.ML Thy/Setup.thy Thy/Haskabelle.thy
	echo ../Makefile.in: $(ISABELLE_DOC_SRC)
	@$(USEDIR) HOL Thy


## mimic isabelle document sources

../Makefile.in: $(ISABELLE_DOC_SRC)
	( cd .. && for NAME in $(ISABELLE_DOC_SRC)/*; do ln -s $$NAME $$(basename $$NAME); done )



## clean

clean:
	@rm -f $(THY)
